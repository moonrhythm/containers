pg_replication:
  query: "SELECT EXTRACT(EPOCH FROM (now() - pg_last_xact_replay_timestamp())) as lag"
  metrics:
  - lag:
      usage: "GAUGE"
      description: "Replication lag behind master in seconds"

pg_postmaster:
  query: "SELECT pg_postmaster_start_time as start_time_seconds from pg_postmaster_start_time()"
  metrics:
  - start_time_seconds:
      usage: "GAUGE"
      description: "Time at which postmaster started"

pg_database:
  query: "SELECT pg_database.datname, pg_database_size(pg_database.datname) as size FROM pg_database"
  cache_seconds: 30
  metrics:
  - datname:
      usage: "LABEL"
      description: "Name of the database"
  - size_bytes:
      usage: "GAUGE"
      description: "Disk space used by the database"
